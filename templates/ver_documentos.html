<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Documentos por Contratista</title>
    <link href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}" rel="stylesheet" />
    <style>
        .document-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .document-buttons .btn {
            flex: 1 1 calc(33.333% - 10px); /* Distribuir en filas de 3 botones */
            margin-bottom: 10px;
        }
        .btn-inactive {
            background-color: #ccc;
            color: #666;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2>Documentos para el Contratista</h2>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            {% for year in years %}
                <li class="nav-item" role="presentation">
                    <button class="nav-link {% if loop.first %}active{% endif %}" id="year-{{ year }}-tab" data-bs-toggle="tab" data-bs-target="#year-{{ year }}" type="button" role="tab" aria-controls="year-{{ year }}" aria-selected="true">{{ year }}</button>
                </li>
            {% endfor %}
        </ul>
        <div class="tab-content" id="myTabContent">
            {% for year in years %}
                <div class="tab-pane fade {% if loop.first %}show active{% endif %}" id="year-{{ year }}" role="tabpanel" aria-labelledby="year-{{ year }}-tab">
                    <div class="mt-3 document-buttons">
                        {% for documento in documentos_permitidos %}
                            {% if documento in documentos_por_año[year] %}
                                {% set documento_url = url_for('ver_documento', contratista_id=contratista_id, year=year, documento=documento) %}
                            {% else %}
                                {% set documento_url = '#' %}
                            {% endif %}
                            <button type="button" class="btn {% if documento in documentos_por_año[year] %}btn-primary{% else %}btn-inactive{% endif %}" 
                                    onclick="window.open('{{ documento_url }}', '_blank')">
                                {{ documento }}
                            </button>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <script src="{{ url_for('static', filename='bootstrap/js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap/js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.min.js') }}"></script>  
</body>
</html>
